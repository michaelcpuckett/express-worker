(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ExpressWorker = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
(function (global){(function (){
!function(e,t,n,r,o){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof i[r]&&i[r],a=s.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function f(t,n){if(!a[t]){if(!e[t]){var o="function"==typeof i[r]&&i[r];if(!n&&o)return o(t,!0);if(s)return s(t,!0);if(c&&"string"==typeof t)return c(t);var u=Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}p.resolve=function(n){var r=e[t][1][n];return null!=r?r:n},p.cache={};var d=a[t]=new f.Module(t);e[t][0].call(d.exports,p,d,d.exports,this)}return a[t].exports;function p(e){var t=p.resolve(e);return!1===t?{}:f(t)}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=a,f.parent=s,f.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(f,"root",{get:function(){return i[r]}}),i[r]=f;for(var u=0;u<t.length;u++)f(t[u]);if(n){var d=f(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=d:"function"==typeof define&&define.amd?define(function(){return d}):o&&(this[o]=d)}}({"8RSWf":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"_ExpressWorkerRequest",()=>i),r.export(n,"ExpressWorker",()=>f),r.export(n,"applyAdditionalRequestProperties",()=>u);var o=e("path-to-regexp");class i{_self;params={};constructor(e){this._self=e}}class s extends Response{_body="";_blob=null;_redirect="";_ended=!1;_headers=new Headers;_status=200;__html(e){return this._body=e,this._headers.set("Content-Type","text/html"),this}__text(e){return this._body=e,this._headers.set("Content-Type","text/plain"),this}__json(e){return this._body=JSON.stringify(e),this._headers.set("Content-Type","application/json"),this}__blob(e){return this._blob=e,this._headers.set("Content-Type",e.type),this}__send(e){return"string"==typeof e?this._headers.has("Content-Type")?this._body=e:this.__html(e):this.__json(e),this.end(),this}__status(e){return this._status=e,this}set(e,t){return this._headers.set(e,t),this}end(){return this._ended=!0,this}redirect(e){return this._redirect=e,this}}let a={get:(e,t)=>"formData"===t?e._self.formData.bind(e._self):"blob"===t?e._self.blob.bind(e._self):"json"===t?e._self.json.bind(e._self):"text"===t?e._self.text.bind(e._self):"arrayBuffer"===t?e._self.arrayBuffer.bind(e._self):"body"===t?e._self.body:"headers"===t?e._self.headers:"url"===t?e._self.url:"method"===t?e._self.method:e[t]},c={get:(e,t)=>"body"===t?e._body:"headers"===t?e._headers:"blob"===t?e.__blob:"html"===t?e.__html:"text"===t?e.__text:"json"===t?e.__json:"send"===t?e.__send:"status"===t?e.__status:"_self"===t?e:e[t],set:(e,t,n)=>("status"===t&&e.__status(n),"body"===t?e._body=n:e[t]=n,!0)};class f{debug=!1;paths={GET:[],POST:[],PATCH:[],PUT:[],DELETE:[],USE:[]};boundFetchHandler=this.handleFetch.bind(this);constructor(e){self.addEventListener("fetch",this.boundFetchHandler),e?.debug&&(this.debug=!0,console.log("ExpressWorker initialized"))}get(e,t){this.paths.GET.push([e,t])}post(e,t){this.paths.POST.push([e,t])}put(e,t){this.paths.PUT.push([e,t])}patch(e,t){this.paths.PATCH.push([e,t])}delete(e,t){this.paths.DELETE.push([e,t])}use(e){this.paths.USE.push(e.bind(this))}async handleRequest(e){if(!(e instanceof FetchEvent))throw Error("Event must be a FetchEvent");let t=e.request,n=new Proxy(new i(t),a),r=new Proxy(new s,c);if(!(n instanceof i&&"params"in n))throw Error("Request must be a modified request");if(!(r instanceof s&&"_body"in r&&"_headers"in r))throw Error("Response must be a modified response");for(let e of this.paths.USE)if(await e(n,r),r._ended)continue;for(let[e,i]of this.paths[t.method]){if(r._ended)continue;let s=[],a=(0,o.pathToRegexp)(e,s).exec(new URL(t.url).pathname);if(!a)continue;let c=Object.fromEntries(s.map((e,t)=>[e.name,a?.[t+1]]).filter(Boolean));n.params=c,await i(n,r)}let{_body:f,_status:u,_headers:d,_blob:p,_redirect:h}=r;if(this.debug&&console.log(this,n._self,r._self),h)return Response.redirect(h,303);let l=f||p;return l?new Response(l,{status:u,headers:d}):new Response("Not found",{status:404})}handleFetch(e){if(!(e instanceof FetchEvent))throw Error("ExpressWorkerApp must be initialized with a FetchEvent");if(this.isMethodEnum(e.request.method))return e.respondWith(this.handleRequest(e))}isMethodEnum(e){return"GET"===e||"POST"===e||"PATCH"===e||"PUT"===e||"DELETE"===e}__reset(){this.paths={GET:[],POST:[],PATCH:[],PUT:[],DELETE:[],USE:[]}}}function u(e){return async(t,n)=>await e(t,n)}},{"path-to-regexp":"bN5Da","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],bN5Da:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");function o(e,t){void 0===t&&(t={});for(var n=function(e){for(var t=[],n=0;n<e.length;){var r=e[n];if("*"===r||"+"===r||"?"===r){t.push({type:"MODIFIER",index:n,value:e[n++]});continue}if("\\"===r){t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});continue}if("{"===r){t.push({type:"OPEN",index:n,value:e[n++]});continue}if("}"===r){t.push({type:"CLOSE",index:n,value:e[n++]});continue}if(":"===r){for(var o="",i=n+1;i<e.length;){var s=e.charCodeAt(i);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||95===s){o+=e[i++];continue}break}if(!o)throw TypeError("Missing parameter name at ".concat(n));t.push({type:"NAME",index:n,value:o}),n=i;continue}if("("===r){var a=1,c="",i=n+1;if("?"===e[i])throw TypeError('Pattern cannot start with "?" at '.concat(i));for(;i<e.length;){if("\\"===e[i]){c+=e[i++]+e[i++];continue}if(")"===e[i]){if(0==--a){i++;break}}else if("("===e[i]&&(a++,"?"!==e[i+1]))throw TypeError("Capturing groups are not allowed at ".concat(i));c+=e[i++]}if(a)throw TypeError("Unbalanced pattern at ".concat(n));if(!c)throw TypeError("Missing pattern at ".concat(n));t.push({type:"PATTERN",index:n,value:c}),n=i;continue}t.push({type:"CHAR",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}(e),r=t.prefixes,o=void 0===r?"./":r,i="[^".concat(f(t.delimiter||"/#?"),"]+?"),s=[],a=0,c=0,u="",d=function(e){if(c<n.length&&n[c].type===e)return n[c++].value},p=function(e){var t=d(e);if(void 0!==t)return t;var r=n[c],o=r.type,i=r.index;throw TypeError("Unexpected ".concat(o," at ").concat(i,", expected ").concat(e))},h=function(){for(var e,t="";e=d("CHAR")||d("ESCAPED_CHAR");)t+=e;return t};c<n.length;){var l=d("CHAR"),_=d("NAME"),m=d("PATTERN");if(_||m){var v=l||"";-1===o.indexOf(v)&&(u+=v,v=""),u&&(s.push(u),u=""),s.push({name:_||a++,prefix:v,suffix:"",pattern:m||i,modifier:d("MODIFIER")||""});continue}var x=l||d("ESCAPED_CHAR");if(x){u+=x;continue}if(u&&(s.push(u),u=""),d("OPEN")){var v=h(),E=d("NAME")||"",y=d("PATTERN")||"",b=h();p("CLOSE"),s.push({name:E||(y?a++:""),pattern:E&&!y?i:y,prefix:v,suffix:b,modifier:d("MODIFIER")||""});continue}p("END")}return s}function i(e,t){return s(o(e,t),t)}function s(e,t){void 0===t&&(t={});var n=u(t),r=t.encode,o=void 0===r?function(e){return e}:r,i=t.validate,s=void 0===i||i,a=e.map(function(e){if("object"==typeof e)return new RegExp("^(?:".concat(e.pattern,")$"),n)});return function(t){for(var n="",r=0;r<e.length;r++){var i=e[r];if("string"==typeof i){n+=i;continue}var c=t?t[i.name]:void 0,f="?"===i.modifier||"*"===i.modifier,u="*"===i.modifier||"+"===i.modifier;if(Array.isArray(c)){if(!u)throw TypeError('Expected "'.concat(i.name,'" to not repeat, but got an array'));if(0===c.length){if(f)continue;throw TypeError('Expected "'.concat(i.name,'" to not be empty'))}for(var d=0;d<c.length;d++){var p=o(c[d],i);if(s&&!a[r].test(p))throw TypeError('Expected all "'.concat(i.name,'" to match "').concat(i.pattern,'", but got "').concat(p,'"'));n+=i.prefix+p+i.suffix}continue}if("string"==typeof c||"number"==typeof c){var p=o(String(c),i);if(s&&!a[r].test(p))throw TypeError('Expected "'.concat(i.name,'" to match "').concat(i.pattern,'", but got "').concat(p,'"'));n+=i.prefix+p+i.suffix;continue}if(!f){var h=u?"an array":"a string";throw TypeError('Expected "'.concat(i.name,'" to be ').concat(h))}}return n}}function a(e,t){var n=[];return c(p(e,n,t),n,t)}function c(e,t,n){void 0===n&&(n={});var r=n.decode,o=void 0===r?function(e){return e}:r;return function(n){var r=e.exec(n);if(!r)return!1;for(var i=r[0],s=r.index,a=Object.create(null),c=1;c<r.length;c++)!function(e){if(void 0!==r[e]){var n=t[e-1];"*"===n.modifier||"+"===n.modifier?a[n.name]=r[e].split(n.prefix+n.suffix).map(function(e){return o(e,n)}):a[n.name]=o(r[e],n)}}(c);return{path:i,index:s,params:a}}}function f(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function u(e){return e&&e.sensitive?"":"i"}function d(e,t,n){void 0===n&&(n={});for(var r=n.strict,o=void 0!==r&&r,i=n.start,s=n.end,a=n.encode,c=void 0===a?function(e){return e}:a,d=n.delimiter,p=n.endsWith,h="[".concat(f(void 0===p?"":p),"]|$"),l="[".concat(f(void 0===d?"/#?":d),"]"),_=void 0===i||i?"^":"",m=0;m<e.length;m++){var v=e[m];if("string"==typeof v)_+=f(c(v));else{var x=f(c(v.prefix)),E=f(c(v.suffix));if(v.pattern){if(t&&t.push(v),x||E){if("+"===v.modifier||"*"===v.modifier){var y="*"===v.modifier?"?":"";_+="(?:".concat(x,"((?:").concat(v.pattern,")(?:").concat(E).concat(x,"(?:").concat(v.pattern,"))*)").concat(E,")").concat(y)}else _+="(?:".concat(x,"(").concat(v.pattern,")").concat(E,")").concat(v.modifier)}else"+"===v.modifier||"*"===v.modifier?_+="((?:".concat(v.pattern,")").concat(v.modifier,")"):_+="(".concat(v.pattern,")").concat(v.modifier)}else _+="(?:".concat(x).concat(E,")").concat(v.modifier)}}if(void 0===s||s)o||(_+="".concat(l,"?")),_+=n.endsWith?"(?=".concat(h,")"):"$";else{var b=e[e.length-1],g="string"==typeof b?l.indexOf(b[b.length-1])>-1:void 0===b;o||(_+="(?:".concat(l,"(?=").concat(h,"))?")),g||(_+="(?=".concat(l,"|").concat(h,")"))}return new RegExp(_,u(n))}function p(e,t,n){var r;return e instanceof RegExp?function(e,t){if(!t)return e;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,o=n.exec(e.source);o;)t.push({name:o[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),o=n.exec(e.source);return e}(e,t):Array.isArray(e)?(r=e.map(function(e){return p(e,t,n).source}),new RegExp("(?:".concat(r.join("|"),")"),u(n))):d(o(e,n),t,n)}r.defineInteropFlag(n),r.export(n,"parse",()=>o),r.export(n,"compile",()=>i),r.export(n,"tokensToFunction",()=>s),r.export(n,"match",()=>a),r.export(n,"regexpToFunction",()=>c),r.export(n,"tokensToRegexp",()=>d),r.export(n,"pathToRegexp",()=>p)},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],k3151:[function(e,t,n){n.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},n.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.exportAll=function(e,t){return Object.keys(e).forEach(function(n){"default"===n||"__esModule"===n||Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}),t},n.export=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:n})}},{}]},["8RSWf"],"8RSWf","parcelRequire24ce");


}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},[1])(1)
});
